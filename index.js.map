{"mappings":"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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-fa1dac202f181a87.js","src/index.js","package.json","src/utils/configs.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/utils/utils.js","src/utils/as-messaging.js","src/app/main.js","node_modules/@swc/helpers/esm/_object_spread.js","node_modules/@swc/helpers/esm/_define_property.js","src/utils/iframe.js","src/utils/constants.js","src/app/player/index.js","node_modules/@swc/helpers/esm/_class_private_field_get.js","node_modules/@swc/helpers/esm/_class_apply_descriptor_get.js","node_modules/@swc/helpers/esm/_class_extract_field_descriptor.js","node_modules/@swc/helpers/esm/_class_private_field_init.js","node_modules/@swc/helpers/esm/_check_private_redeclaration.js","node_modules/@swc/helpers/esm/_class_private_field_set.js","node_modules/@swc/helpers/esm/_class_apply_descriptor_set.js","node_modules/@swc/helpers/esm/_object_spread_props.js","node_modules/@swc/helpers/esm/_object_without_properties.js","node_modules/@swc/helpers/esm/_object_without_properties_loose.js","src/utils/new-relic-log.js","src/utils/integrated-player-error.js","src/app/player/track-selection.js","src/app/pp-handler.js","src/app/get-asset.js","src/app/system-token-storage.js","node_modules/uuid/dist/esm-browser/index.js","node_modules/uuid/dist/esm-browser/v4.js","node_modules/uuid/dist/esm-browser/native.js","node_modules/uuid/dist/esm-browser/rng.js","node_modules/uuid/dist/esm-browser/stringify.js","node_modules/uuid/dist/esm-browser/validate.js","node_modules/uuid/dist/esm-browser/regex.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"bebc91dccb5f5641\";module.bundle.HMR_BUNDLE_ID = \"c75d535b7e64cba1\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */, assetsToDispose /*: Array<[ParcelRequire, string]> */, assetsToAccept /*: Array<[ParcelRequire, string]> */;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || location.port;\n}\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !/localhost|127.0.0.1|0.0.0.0/.test(hostname) ? 'wss' : 'ws';\n  var ws;\n  try {\n    ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n  } catch (err) {\n    if (err.message) {\n      console.error(err.message);\n    }\n    ws = {};\n  }\n\n  // Web extension context\n  var extCtx = typeof browser === 'undefined' ? typeof chrome === 'undefined' ? null : chrome : browser;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n\n  // $FlowFixMe\n  ws.onmessage = async function (event /*: {data: string, ...} */) {\n    checkedAssets = {} /*: {|[string]: boolean|} */;\n    assetsToAccept = [];\n    assetsToDispose = [];\n    var data /*: HMRMessage */ = JSON.parse(event.data);\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH);\n\n      // Handle HMR Update\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n      if (handled) {\n        console.clear();\n\n        // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n        await hmrApplyUpdates(assets);\n\n        // Dispose all old assets.\n        let processedAssets = {} /*: {|[string]: boolean|} */;\n        for (let i = 0; i < assetsToDispose.length; i++) {\n          let id = assetsToDispose[i][1];\n          if (!processedAssets[id]) {\n            hmrDispose(assetsToDispose[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n\n        // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n        processedAssets = {};\n        for (let i = 0; i < assetsToAccept.length; i++) {\n          let id = assetsToAccept[i][1];\n          if (!processedAssets[id]) {\n            hmrAccept(assetsToAccept[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n      } else fullReload();\n    }\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error('🚨 [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html);\n        // $FlowFixMe\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n  ws.onerror = function (e) {\n    if (e.message) {\n      console.error(e.message);\n    }\n  };\n  ws.onclose = function () {\n    console.warn('[parcel] 🚨 Connection to the HMR server was lost');\n  };\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel] ✨ Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n          🚨 ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div>💡 ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div>📝 <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 || _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension fix\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3 && typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n            extCtx.runtime.reload();\n            return;\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 || _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return true;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToDispose.push([bundle, id]);\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        assetsToAlsoAccept.forEach(function (a) {\n          hmrDispose(a[0], a[1]);\n        });\n\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n}","import {name as appName, version as appVersion} from '../package.json'; // eslint-disable-line import/no-unused-modules\nimport {getPartnerIdConfig, getGlassIntegratedPlayerScriptUrlFromVersion} from './utils/configs';\nimport {addProxyIp} from './utils/utils';\nimport {MSG_TYPES, sendApplicationServicesMessage} from './utils/as-messaging';\nimport defaultMainApplication from './app/main';\n\n// Always print the running script name + version.\nconsole.info(`${appName} version ${appVersion} loaded`); // eslint-disable-line no-console\n\n// Development only hot reloading;  WIP to save us from the window reloading each time, would be nice to reconnect to websocket.\nif (process.env.NODE_ENV === 'development') {\n    if (module.hot) {\n        module.hot.dispose(function hotReloadDispose(data) {\n            // module is about to be replaced.\n            // You can save data that should be accessible to the new asset in `data`\n            console.error('dispose');\n            data.updated = Date.now();\n        });\n\n        module.hot.accept(function hotReloadAccept(/* getParents */) {\n            console.error('accept');\n\n            // module or one of its dependencies was just updated.\n            // data stored in `dispose` is available in `module.hot.data`\n            const {updated} = module.hot.data;\n\n            console.log('RELOADED', updated); // eslint-disable-line no-console\n            window.location.reload(true);\n        });\n    }\n}\n\nexport default function init({\n    preloadedWebSocket = undefined,\n    preloadedGlassConfigureObject = undefined,\n    preloadedPartnerGlassConfigureObject = undefined,\n} = {}) {\n    const webSocket = preloadedWebSocket || new WebSocket('ws://localhost:9031');\n\n    if (preloadedGlassConfigureObject) {\n        defaultMainApplication({\n            webSocket,\n            glassConfigureObject: preloadedGlassConfigureObject,\n            partnerConfig: preloadedPartnerGlassConfigureObject,\n        });\n    } else {\n        webSocket.onopen = function onOpen(/* event */) {\n            console.log('WebSocket connection established'); // eslint-disable-line no-console\n        };\n\n        webSocket.onmessage = function onMessage(event) {\n            const request = JSON.parse(event.data);\n            const {msgType, msgData} = request;\n\n            const logFunction = (msgType === MSG_TYPES.CONFIGURE) ? 'debug' : 'log';\n\n            console[logFunction](`WebSocket request received from AS to index ${JSON.stringify(request)}`); // eslint-disable-line no-console\n\n            if (msgType === MSG_TYPES.CONFIGURE) {\n                // if `configure` doesn't have partnerId, ignore it\n                if (msgData.accountId && msgData.estbMacAddress && msgData.partnerId) {\n                    // regardless if we use it or not, we're going to fetch remote config.\n                    // Remote config in the future may grow to have some other options for \"prior-to-booting\" things.\n                    loadLatestVersionFromGlassConfigureObject(webSocket, msgData, defaultMainApplication);\n                } else {\n                    console.warn('AS \\'configure\\' message ignored, waiting for another containing accountId, estbMacAddress and partnerId');\n                }\n            } else if (msgType === MSG_TYPES.GET_STATE) {\n                // While we're still loading things, this reply keeps further instructions away from us.\n                // We may wish to use further instructions from a differently loaded bundle.\n                sendApplicationServicesMessage(\n                    MSG_TYPES.GET_STATE_RETURN,\n                    {state: 'loadingPpConfig'},\n                    webSocket,\n                    request\n                );\n            } else {\n                console.warn('Loader: Previous WebSocket message not handled prior to loader finishing', msgType, msgData);\n            }\n        };\n    }\n}\n\n// We expose this on the dom, so if another version is calling us, it can call us.\nwindow.streamotionGlass = {init, version: appVersion};\n\n/**\n * Fetches config on resources matching the device's partnerId.  If there, and finds version override,\n * loads that script and passes configuration to the new app's init function.\n * If any error, or no config or same version, hit our callback that should reference our app's main function.\n *\n * @typedef {import('./utils/as-messaging').WebSocketMessageConfigure} WebSocketMessageConfigure\n *\n * @param {WebSocket}               webSocket               websocket to be passed to main or new version\n * @param {WebSocketMessageConfigure} glassConfigureObject       Configuration Object from websocket that contains mac address and details of environment\n * @param {requestCallback}         callbackIfNoOverrides   Callback to hit if no different script to load.\n */\nexport async function loadLatestVersionFromGlassConfigureObject(webSocket, glassConfigureObject, callbackIfNoOverrides) {\n    const {partnerId} = glassConfigureObject;\n    const partnerConfigUrl = getPartnerIdConfig(partnerId);\n\n    let overrideVersion;\n\n    fetch(addProxyIp(partnerConfigUrl))\n        .then((response) => {\n            if (response.ok) {\n                return response.json();\n            } else {\n                throw `Unable to get partner config. ${partnerConfigUrl} ${response.status} ${response.statusText}`;\n            }\n        })\n        .then((partnerConfig) => {\n            // If development build, never try for a different version.  Use local main.\n            if (process.env.NODE_ENV === 'development') {\n                return callbackIfNoOverrides({webSocket, glassConfigureObject, partnerConfig});\n            }\n\n            // Do we have a version to use from config?\n            if (partnerConfig?.version) {\n                overrideVersion = partnerConfig.version;\n            }\n\n            // Do we have a version to use from MAC address overrides?  This more pressing than global version.\n            if (partnerConfig?.macAddressOverrides?.[glassConfigureObject.estbMacAddress]) {\n                overrideVersion = partnerConfig.macAddressOverrides[glassConfigureObject.estbMacAddress];\n            }\n\n            // If we don't have an override version, or we do and it's the same to the one loaded right now, just use local main.\n            if (!overrideVersion || overrideVersion === appVersion) {\n                return callbackIfNoOverrides({webSocket, glassConfigureObject, partnerConfig});\n            } else {\n                // Loading override version script from predefined location.\n                return new Promise((resolve, reject) => {\n                    const script = document.createElement('script');\n\n                    script.src = getGlassIntegratedPlayerScriptUrlFromVersion(overrideVersion);\n                    script.type = 'module';\n                    script.addEventListener('load', resolve);\n                    script.addEventListener('error', (e) => reject(e));\n                    document.head.appendChild(script);\n                })\n                    .then(() => {\n                        // When successful, pass all our currently open things to the new version of ourselves exposed on the dom (overwrites)\n                        window.streamotionGlass.init({\n                            preloadedWebSocket: webSocket,\n                            preloadedGlassConfigureObject: glassConfigureObject,\n                            preloadedPartnerGlassConfigureObject: partnerConfig,\n                        });\n                    })\n                    .catch((error) => {\n                        // Any error loading the new script, pass to our local main.\n                        console.error('loadLatestVersionFromGlassConfigureObject', error);\n\n                        callbackIfNoOverrides({webSocket, glassConfigureObject, partnerConfig});\n                    });\n            }\n        })\n        .catch((error) => {\n            console.error('loadLatestVersionFromGlassConfigureObject Error in Fetch Partner Config', error);\n\n            callbackIfNoOverrides({webSocket, glassConfigureObject});\n        });\n}\n","{\n  \"name\": \"@fsa-streamotion/streamotion-glass-integrated-player\",\n  \"version\": \"0.6.1\",\n  \"description\": \"Magneto Integrated Player\",\n  \"author\": \"Streamotion Engineering\",\n  \"license\": \"UNLICENSED\",\n  \"engines\": {\n    \"node\": \"^14.0.0\",\n    \"npm\": \"^8.0.0\"\n  },\n  \"files\": [\n    \"dist\"\n  ],\n  \"browserslist\": [\n    \"safari >= 11.0.3\"\n  ],\n  \"scripts\": {\n    \"start\": \"rimraf dist && parcel serve --port 8080 src/index.html --open --target default\",\n    \"prepare\": \"rimraf dist && rimraf .parcel-cache && mkdir dist && parcel build src/index.html --public-url REPLACE_RELATIVE\",\n    \"prepare-js-only\": \"rimraf dist && rimraf .parcel-cache && mkdir dist && parcel build src/index.js --public-url REPLACE_RELATIVE\",\n    \"test\": \"npm run lint && jest\",\n    \"test-watch\": \"jest --watch\",\n    \"lint\": \"eslint --ext .js src\",\n    \"postinstall\": \"cd src/iframe-manager/magneto && npm ci && cd ../au.com.abc && npm ci && cd ../au.com.sbs && npm ci && cd ../au.com.nine && npm ci && cd ../au.com.ten && npm ci && cd ../au.com.seven && npm ci\"\n  },\n  \"alias\": {\n    \"buffer\": false,\n    \"crypto\": false\n  },\n  \"dependencies\": {\n    \"@parcel/transformer-css\": \"^2.10.3\",\n    \"@parcel/watcher\": \"^2.4.1\",\n    \"uuid\": \"^9.0.0\"\n  },\n  \"devDependencies\": {\n    \"@babel/core\": \"^7.18.10\",\n    \"@babel/eslint-parser\": \"^7.18.9\",\n    \"@babel/preset-env\": \"^7.24.5\",\n    \"@parcel/babel-preset-env\": \"^2.12.0\",\n    \"@parcel/transformer-sass\": \"^2.10.3\",\n    \"babel-jest\": \"^29.7.0\",\n    \"eslint\": \"^7.32.0\",\n    \"eslint-plugin-compat\": \"^4.2.0\",\n    \"eslint-plugin-filenames\": \"^1.3.2\",\n    \"eslint-plugin-import\": \"^2.25.2\",\n    \"eslint-plugin-jsdoc\": \"^37.0.3\",\n    \"eslint-plugin-node\": \"^11.1.0\",\n    \"events\": \"^3.3.0\",\n    \"jest\": \"^29.7.0\",\n    \"jest-environment-jsdom\": \"^29.7.0\",\n    \"jsdom\": \"^24.0.0\",\n    \"parcel\": \"^2.10.3\",\n    \"parcel-reporter-static-files-copy\": \"^1.5.3\",\n    \"process\": \"^0.11.10\",\n    \"rimraf\": \"^3.0.2\",\n    \"stream-browserify\": \"^3.0.0\",\n    \"string_decoder\": \"^1.3.0\"\n  },\n  \"staticFiles\": [\n    {\n      \"staticPath\": \"src/iframe-manager/au.com.seven/static\",\n      \"staticOutPath\": \"iframe-manager\"\n    },\n    {\n      \"staticPath\": \"src/iframe-manager/au.com.abc/static\",\n      \"staticOutPath\": \"iframe-manager\"\n    }\n  ]\n}\n","export const getPartnerIdConfig = (partnerId) => (`https://resources.streamotion.com.au/glass/integrated-player/partner-configs/${partnerId}.json`);\n\nexport const getGlassIntegratedPlayerScriptUrlFromVersion = (version) => {\n    if (version.indexOf('-qa') > -1 || version.indexOf('-pr') > -1) {\n        return `https://resources.streamotion.com.au/glass/integrated-player/builds/qa/${version}/dist/index.js`;\n    } else {\n        return `https://resources.streamotion.com.au/glass/integrated-player/builds/version/${version}/dist/index.js`;\n    }\n};\n\nexport const getGlassIntegratedPlayerIframeManagerScriptUrlFromVersion = (version) => {\n    if (version.indexOf('-qa') > -1) {\n        return `https://resources.streamotion.com.au/glass/integrated-player/builds/qa/${version}/dist/iframe-manager/index.js`;\n    } else {\n        return `https://resources.streamotion.com.au/glass/integrated-player/builds/version/${version}/dist/iframe-manager/index.js`;\n    }\n};\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","const PROXY_IP = window.localStorage.getItem('PROXY_IP') || '';\n\nexport function addProxyIp(url, proxyIp = PROXY_IP) {\n    if (proxyIp && url && !url.includes(proxyIp)) {\n        return `${proxyIp}${url}`;\n    }\n\n    return url;\n}\n\nexport function getVideoPositionFromContentPosition(contentPositionMilliseconds, adBreaks) {\n    let videoPositionMilliseconds = contentPositionMilliseconds;\n\n    for (const adBreak of adBreaks) {\n        for (const ad of adBreak.ads) {\n            if (ad.startTime < videoPositionMilliseconds) {\n                videoPositionMilliseconds += ad.duration;\n            // } else if (ad.startTime === videoPositionMilliseconds) {\n            //     console.log('start of an ad');\n            }\n        }\n    }\n\n    return videoPositionMilliseconds;\n}\n\n","// Application Services (messaging, web sockets)\n\n/**\n * @typedef {Object} WebSocketMessageConfigure\n * @property {string} accountId                         - User Account Id\n * @property {string} appName                           - EPG Application Name\n * @property {string} appVersion                        - EPG Application Version\n * @property {string} brand                             - Brand\n * @property {string} category                          - Category\n * @property {string} countryCode                       - Country Code\n * @property {string} estbMacAddress                    - Device Mac Address\n * @property {string} manufacturer                      - Manufacturer\n * @property {string} model                             - Model\n * @property {string} osName                            - Operating System Name\n * @property {string} osVersion                         - Operating System Version\n * @property {string} partnerId                         - Partner Id\n * @property {Object} ppConfigOverride                  - Overrides\n * @property {string} ppConfigOverride.licenseServerUrl - Licence Server for..... comcast?\n * @property {string} xboServiceAccountId               - No idea.\n */\n\nexport const MSG_TYPES = {\n    PP_API_CALL:         'ppApiCall',\n    PP_API_RETURN:       'ppApiReturn',\n    PP_API_EVENT:        'ppApiEvent',\n    PP_API_REGISTER_ALL: 'ppRegisterAll',    // Register for all events. No msgData.\n    CONFIGURE:           'configure',        // Configure parameters\n    GET_STATE:           'getState',         // Get application state\n    GET_STATE_RETURN:    'getStateReturn',   // State return is string of main.State values\n    GET_VERSION:         'getVersion',       // Return is string of app version and all library versions\n    GET_VERSION_RETURN:  'getVersionReturn', // Return is string of app version and all library versions\n    MIRROR_MSG:          'mirrorMsg',        // Mirrored AS message to the debug socket\n    RELOAD:              'reload',           // msgData is a {url: <string>}\n};\n\n/**\n * Handle formatting replies to ApplicationService over given WebSocket\n *\n * @param {String}    msgType              String/Name of event to send.\n * @param {Object}    msgData              Object to send back over websocket\n * @param {WebSocket} webSocket            WebSocket to ApplicationService.\n * @param {Object}    [request=undefined]  Previous request payload, to return in reply.\n */\nexport function sendApplicationServicesMessage(msgType, msgData, webSocket, request = undefined) {\n    const messageObject = {msgType, msgData};\n\n    if (request) {\n        messageObject.reqId = request.reqId;\n        messageObject.senderId = request.senderId;\n    }\n\n    const logFunction = (msgData.eventName === 'MediaFailed') ? 'debug' : 'log';\n\n    console[logFunction](`WebSocket response sent to AS ${JSON.stringify(messageObject)}`); // eslint-disable-line no-console\n    webSocket.send(JSON.stringify(messageObject));\n}\n","/* eslint-disable no-console */\nimport {name as appName, version as appVersion} from '../../package.json'; // eslint-disable-line import/no-unused-modules\nimport {MSG_TYPES, sendApplicationServicesMessage} from '../utils/as-messaging';\nimport {changeIframeSource} from '../utils/iframe';\nimport {IFRAME_MANAGER_URL_PATH} from '../utils/constants';\n\nimport Player from './player';\nimport ppApiHandler from './pp-handler';\nimport {setupDeviceUuid} from './system-token-storage';\n\nwindow.isConsoleEnabled = window.localStorage.getItem('CONSOLE_ENABLED') || false;\nif (!window.isConsoleEnabled) {\n    console.warn('Integrated Player/JSPP console logging is partially disabled. To enable all console log: navigate to port 10000 and send command `localStorage.setItem(\"CONSOLE_ENABLED\", \"true\")` then `location.reload()`');\n    for (const logFunction of ['log', 'info']) {\n        // eslint-disable-next-line no-console, no-empty-function\n        console[logFunction] = () => {};\n    }\n}\n\n/**\n * Main execution thread of the application.  Here is where we keep lifecycle such as user data.\n *\n * @typedef {import('../utils/as-messaging').WebSocketMessageConfigure} WebSocketMessageConfigure\n *\n * @param {Object}                      main                         object containing params for main thread\n * @param {WebSocket}                   main.webSocket               websocket to be passed to main or new version\n * @param {WebSocketMessageConfigure}   main.glassConfigureObject    object from AS 'configure' websocket message, contains mac address and details of environment\n * @param {Object}                      main.partnerConfig           Configuration Object from remote config that contains overrides and other settings/feature flags, whatever.\n * @param {Object}                      main.configureRequestPayload configure request payload from initial websocket connection, require for reply.\n */\nexport default async function mainApplication({\n    webSocket,\n    glassConfigureObject = {},\n    partnerConfig = {},\n}) {\n    const {partnerId, estbMacAddress} = glassConfigureObject;\n    const mountEl$ = document.querySelector('#mount') || document.createElement('div');\n    const iframeManager$ = document.querySelector('#streamotionGlassIframeManager');\n\n    // Preload our iframe manager to use default no-provider (magneto/foxtel)\n    changeIframeSource(iframeManager$, `${IFRAME_MANAGER_URL_PATH}?partnerId=${partnerId}&estbMacAddress=${estbMacAddress}&provider=`);\n\n    const player = new Player({\n        initConfigOverrides: {},\n    });\n\n    console.log(`AAMP version ${player.version} created`);\n\n    console.info(`${appName} version ${appVersion} running main thread`); // eslint-disable-line no-console\n    console.log(`OS ${glassConfigureObject.osVersion}\\nconfigure`, {glassConfigureObject, partnerConfig}); // eslint-disable-line no-console\n\n    const uuid = await setupDeviceUuid();\n\n    if (process.env.NODE_ENV === 'development') {\n        mountEl$.innerHTML = 'Press <a style=\"text-shadow: 2px 2px #91c742\";>Home</a> and select an asset.';\n        mountEl$.style.display = 'block';\n    }\n\n    webSocket.onclose = function onClose(event) {\n        if (event.wasClean) {\n            console.log('WebSocket connection closed cleanly', {event}); // eslint-disable-line no-console\n        } else {\n            console.error('WebSocket connection died', {event});\n        }\n    };\n\n    webSocket.onerror = function onError(error) {\n        console.error('WebSocketError', error);\n    };\n\n    webSocket.onmessage = function onMessage(event) {\n        const request = JSON.parse(event.data);\n        const {msgType} = request;\n\n        const logFunction = (request.msgData?.fnName === 'setAsset' || request.msgData?.fnName === 'stop')\n            ? 'debug' : 'log';\n\n        console[logFunction](`WebSocket request received from AS to main ${JSON.stringify(request)}`); // eslint-disable-line no-console\n\n        switch (msgType) {\n            case MSG_TYPES.GET_STATE:\n                sendApplicationServicesMessage('getStateReturn', {state: 'ready'}, webSocket, request);\n                break;\n\n            case MSG_TYPES.PP_API_REGISTER_ALL:\n                player.setCallbackOnEvents((eventName, payload) => {\n                    sendApplicationServicesMessage(\n                        'ppApiEvent',\n                        {\n                            eventName,\n                            eventData: {\n                                type: eventName,\n                                ...payload,\n                            },\n                        },\n                        webSocket,\n                        request\n                    );\n                });\n\n                // no response message required for ppRegisterAll\n                break;\n\n            case MSG_TYPES.PP_API_CALL:\n                ppApiHandler({\n                    request,\n                    player,\n                    deviceInfo: {\n                        appName: 'magneto-integrated-player',\n                        appVersion,\n                        glassConfigure: glassConfigureObject,\n                        playerName: player.name,\n                        playerVersion: player.version,\n                        uuid,\n                    },\n                    webSocket,\n\n                    iframeManager$,\n                });\n                break;\n\n            default:\n                console.warn('msgType not supported ', request);\n                break;\n        }\n    };\n}\n\n","import { _define_property } from \"./_define_property.js\";\n\nexport function _object_spread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n\n        if (typeof Object.getOwnPropertySymbols === \"function\") {\n            ownKeys = ownKeys.concat(\n                Object.getOwnPropertySymbols(source).filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                })\n            );\n        }\n\n        ownKeys.forEach(function(key) {\n            _define_property(target, key, source[key]);\n        });\n    }\n\n    return target;\n}\nexport { _object_spread as _ };\n","export function _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n    } else obj[key] = value;\n\n    return obj;\n}\nexport { _define_property as _ };\n","export async function changeIframeSource(iframeElement, newUrl, reuseIfUrlUnchanged = true) {\n    return new Promise((resolve, reject) => {\n        // Warning: iframeElement.src is absolute, newUrl is relative\n        // If the provider is the same as the current one, resolve the promise without reloading\n        if (reuseIfUrlUnchanged && getProvider(iframeElement.src) === getProvider(newUrl)) {\n            resolve();\n            return;\n        }\n\n        // provider is changing\n\n        // Set up event listeners for load and error events\n        function onLoad() {\n            removeEventListeners();\n            resolve();\n        }\n\n        function onError() {\n            removeEventListeners();\n            reject(new Error('Error loading the updated URL'));\n        }\n\n        function removeEventListeners() {\n            iframeElement.removeEventListener('load', onLoad);\n            iframeElement.removeEventListener('error', onError);\n        }\n\n        // Add event listeners\n        iframeElement.addEventListener('load', onLoad);\n        iframeElement.addEventListener('error', onError);\n\n        // Change the iframe source\n        iframeElement.src = newUrl;\n    });\n}\nfunction getProvider(path) {\n    return new URLSearchParams(path.substring(path.indexOf('?')))?.get('provider');\n}\n\nexport async function waitForKeyValueOnObject(objectToWatch, valueName, timeoutInSeconds = 0) {\n    return new Promise((resolve, reject) => {\n        const timestampWhenStartedWaitingForProvider = Date.now();\n\n        const waitForKeyValueCheckFunction = () => {\n            const timeDifferenceInSeconds = (Date.now() - timestampWhenStartedWaitingForProvider) / 1000;\n\n            if (timeoutInSeconds && timeDifferenceInSeconds > timeoutInSeconds) {\n                return reject(`waitForKeyValueOnObject ${valueName} timeout of ${timeoutInSeconds}s`);\n            }\n\n            setTimeout(() => {\n                if (objectToWatch[valueName]) {\n                    resolve();\n                } else {\n                    waitForKeyValueCheckFunction();\n                }\n            });\n        };\n\n        waitForKeyValueCheckFunction();\n    });\n}\n","export const IFRAME_MANAGER_URL_PATH = './iframe-manager/index.html';\nexport const IFRAME_MANAGER_TIMEOUT_LOADING_PROVIDER_IN_SECONDS = 10;\n\nexport const PLAYBACK_STATES = {\n    0:  'idle',\n    1:  'initializing',\n    2:  'initialized',\n    3:  'preparing',\n    4:  'prepared',\n    5:  'buffering',\n    6:  'paused',\n    7:  'seeking',\n    8:  'playing',\n    9:  'stopping',\n    10: 'stopped',\n    11: 'complete',\n    12: 'error',\n    13: 'released',\n    14: 'blocked',\n};\n\nexport const RECOVERABLE_HTTP_STATUS_CODES = {\n    408: 'Request Timeout',\n    429: 'Too Many Requests',\n    500: 'Internal Server Error',\n    502: 'Bad Gateway',\n    503: 'Service Unavailable',\n    504: 'Gateway Timeout',\n};\n","/* eslint-disable no-warning-comments */\n/* eslint-disable no-console */\nimport {PLAYBACK_STATES} from '../../utils/constants';\nimport {getVideoPositionFromContentPosition} from '../../utils/utils';\nimport sendNewRelicLog from '../../utils/new-relic-log';\nimport IntegratedPlayerError from '../../utils/integrated-player-error';\nimport {audioTrackMapFunction, textTrackMapFunction} from './track-selection';\n\nfunction parseJson(input) {\n    if (input === undefined) {\n        return undefined;\n    }\n\n    return JSON.parse(input);\n}\n\nexport default class Player {\n    aampMediaPlayer = null;\n    currentSrc = null;\n    isEnabled = false;\n    #videoAdBreaks = null;\n\n    isCaptionsEnabled = false;\n    isTrickplayEnabled = true;\n    reportAdsToASEnabled = true;\n\n    sourceObjects = [];\n\n    // recovery state variables\n    sourceIndex = 0; // integer number, index of the stream currently being attempted\n    sourceRetryCount = 0;  // integer number, number of attempts performed for the current sourceIndex, 0 first try, 1 first retry, 2 second retry\n    sourceFirstFramePlayedAtTimestamp = null; // epoch time of last successful recovery for this source, when sourceIndex changes, this value is reset\n    recoverySettings = {\n        sourceRetryCountMax: 0, // integer number, maximum number of retry attempts for a source\n        minimumUninterruptedPlayback: 0, // milliseconds\n    };\n\n    isScheduledPauseSet = false;\n    hasFirstFramePlayed = false;\n    previousPlayState = null;\n\n    defaultDrmConfig = {\n        preferredKeysystem: 'com.microsoft.playready',\n    };\n\n    trickplayResponseEnum = {\n        Success: 1,\n        TrickplayDisabled: 0,\n        BlockedByAd: -1,\n    }\n\n    constructor({\n        initConfigOverrides = {},\n    } = {}) {\n        this.aampMediaPlayer = new window.AAMPMediaPlayer();\n        this.aampMediaPlayer.setVideoZoom('none');\n        this.videoElement = document.createElement('EventTarget');\n        this.videoElement.addEventListener('forceFatalError', (payload) => {\n            this.forceFatalError(payload.detail);\n        });\n        this.videoElement.addRequestHeaders = (requestHeaders) => {\n            requestHeaders.forEach(({key, value, isLicenseRequest}) => {\n                // console.log(`videoElement addRequestHeaders() addCustomHTTPHeader(${key}, ${value}, ${isLicenseRequest})`);\n                this.aampMediaPlayer.addCustomHTTPHeader(key, value, isLicenseRequest);\n            });\n        };\n\n        this.videoElement.getDroppedFrames = () => {\n            const [pq] = parseJson(this.aampMediaPlayer?.getVideoPlaybackQuality()) || [];\n\n            return pq?.dropped;\n        };\n\n        // AS Event messages\n\n        this.aampMediaPlayer.addEventListener('drmMetadata', (payload) => {\n            this.callbackOnEvents('DRMMetadata', {\n                drmMetadataInfo: {\n                    [payload.description]: payload.code,\n                },\n            });\n\n            this.videoElement.dispatchEvent(new CustomEvent('drmMetadata', {detail: {\n                payload,\n            }}));\n        });\n\n        this.aampMediaPlayer.addEventListener('playbackProgressUpdate', (payload) => {\n            this.videoElement.currentOffsetTime = (payload.positionMiliseconds - payload.startMiliseconds) / 1000;\n            this.videoElement.currentTime = Math.round(payload.positionMiliseconds) / 1000;\n            this.videoElement.duration = Math.round(payload.endMiliseconds) / 1000;\n            this.videoElement.liveLatency = Math.round(payload.liveLatency) / 1000;\n            this.videoElement.playbackRate = payload.currentPlayRate; // payload.playbackSpeed doesn't take liveLatencyCorrection into account, payload.currentPlayRate does\n            this.videoElement.bufferedSeconds = Math.round(payload.videoBufferedMiliseconds) / 1000;\n            this.videoElement.networkBandwidth = payload.networkBandwidth;\n\n            this.videoElement.dispatchEvent(new CustomEvent('timeupdate'));\n\n            if (window.isConsoleEnabled) {\n                if (this.videoElement.epochOffsetSeconds) {\n                    const positionEpochSeconds = payload.positionMiliseconds + (this.videoElement.epochOffsetSeconds * 1000);\n                    const liveLatencyCalculated = (new Date() - new Date(positionEpochSeconds)) / 1000;\n                    const logFunction = (liveLatencyCalculated > 3 * 60 * 60) ? 'warn' : 'log';\n\n                    console[logFunction](`video position is ${liveLatencyCalculated.toFixed(1)}s behind live edge, AAMP says ${(payload.liveLatency / 1000).toFixed(1)}s behind live edge, ${(payload.videoBufferedMiliseconds / 1000).toFixed(0)}s buffered`);\n                } else {\n                    console.log(`video position has ${(payload.endMiliseconds - payload.positionMiliseconds).toFixed(0)}s left, ${(payload.videoBufferedMiliseconds / 1000).toFixed(0)}s buffered`);\n                }\n\n                const [pq] = parseJson(this.aampMediaPlayer.getVideoPlaybackQuality());\n\n                if (pq && pq.dropped > 0) {\n                    console.warn(`dropped frames ${this.aampMediaPlayer.getVideoPlaybackQuality()}`);\n                }\n            }\n\n            this.isLinearReviewBufferEnabled = this.contentOptions.assetType === 'LINEAR' && this.isTrickplayEnabled;\n            const linearReviewBufferDepth = window.localStorage.getItem('LINEAR_REVIEW_BUFFER_MS') || 1 * 60 * 60 * 1000;\n\n            if (this.isLinearReviewBufferEnabled && !this.tuneStartOffsetMilliseconds) {\n                const linearReviewBufferHeadstart = 0 * 60 * 1000; // used for local testing only\n\n                this.tuneStartOffsetMilliseconds = payload.positionMiliseconds - linearReviewBufferHeadstart;\n                console.info(`MIPA-52 Linear Review Buffer enabled, stash tuneStartOffsetMilliseconds=${this.tuneStartOffsetMilliseconds}, linearReviewBufferDepth=${linearReviewBufferDepth}`);\n            }\n\n            if (this.contentOptions.assetType === 'IVOD' || this.contentOptions.assetType === 'LIVOD') {\n                // MIPA-104 these are live events, but they should be reported to AS as VODs\n                this.tuneStartOffsetMilliseconds = payload.startMiliseconds;\n            }\n\n            const skewedEnd = payload.endMiliseconds - this.tuneStartOffsetMilliseconds;\n            const skewedPosition = payload.positionMiliseconds - this.tuneStartOffsetMilliseconds;\n            const skewedStart = (this.isLinearReviewBufferEnabled)\n                ? Math.max(0, skewedEnd - linearReviewBufferDepth)\n                : payload.startMiliseconds - this.tuneStartOffsetMilliseconds;\n\n            this.skewedStart = skewedStart;\n\n            if (this.isLinearReviewBufferEnabled) {\n                if (skewedStart > skewedPosition) {\n                    console.warn(`skewedPosition ${skewedPosition} behind skewedStart (${skewedStart}, ${skewedEnd}) by ${Math.round((skewedStart - skewedPosition) / 10) / 100} seconds`);\n                } else if (skewedPosition > skewedEnd) {\n                    console.warn(`skewedPosition ${skewedPosition} ahead of skewedEnd (${skewedStart}, ${skewedEnd}) by ${Math.round((skewedPosition - skewedEnd) / 10) / 100} seconds`);\n                }\n\n                if (this.tuneStartOffsetMilliseconds && payload.playbackSpeed < 0) {\n                    this.setLinearReviewBufferScheduledPause();\n                }\n\n                if (payload.playbackSpeed === 0 && skewedPosition <= skewedStart) {\n                    console.warn('MIPA-52 while paused, the lower limit of the linear review buffer has been reached');\n                    this.aampMediaPlayer.play();\n                }\n            }\n\n            this.callbackOnEvents('MediaProgress', {\n                // the spelling of `Miliseconds` is as per the device response and documentation\n                position: skewedPosition, // <current playback position in ms>,\n                contentOnlyPositionMsec: this.tuneStartOffsetMilliseconds ? null : this.getContentPosition(payload.positionMiliseconds), // content position without ads included, optional\n                startposition: skewedStart, // <content start position in ms>,\n                endposition: skewedEnd, // <content end position in ms>,\n                playbackSpeed: payload.playbackSpeed, // <current playback speed>,\n            });\n\n            if (this.reportAdsToASEnabled && this.videoAdBreaks) {\n                const position = payload.positionMiliseconds;\n\n                let currentVideoAdBreak, currentVideoAd;\n\n                for (const videoAdBreak of this.videoAdBreaks) {\n                    currentVideoAd = videoAdBreak.ads.find(\n                        (ad) => ad && ad.startTime <= position && position < (ad.startTime + ad.duration)\n                    );\n                    if (currentVideoAd) {\n                        currentVideoAdBreak = videoAdBreak;\n                        break;\n                    }\n                }\n                this.isAdPlaying = currentVideoAdBreak && currentVideoAd;\n\n                if (this.adPositionTracking.previousVideoAdBreak !== currentVideoAdBreak) {\n                    if (currentVideoAdBreak) {\n                        // new pod/adBreak has started\n                        this.callbackOnEvents('AdBreakStart', {\n                            videoAdBreak: currentVideoAdBreak,\n                        });\n                    }\n\n                    if (this.adPositionTracking.previousVideoAdBreak) {\n                        // pod/adBreak has finished\n\n                        // eslint-disable-next-line no-return-assign\n                        // this.adPositionTracking.previousVideoAdBreak.ads.map((ad) => ad.watched = true); // MIPA-88\n\n                        this.callbackOnEvents('AdBreakComplete', {\n                            videoAdBreak: this.adPositionTracking.previousVideoAdBreak,\n                        });\n                    }\n                }\n\n                if (this.isAdPlaying) {\n                    // ad is currently playing\n                    this.callbackOnEvents('AdProgress', {\n                        position: payload.positionMiliseconds - currentVideoAdBreak.ads[0]?.startTime,\n                        progress: Math.round((payload.positionMiliseconds - currentVideoAd.startTime) / currentVideoAd.duration * 100),\n                        rate: this.aampMediaPlayer.getPlaybackRate(),\n                        videoAd: currentVideoAd,\n                    });\n                }\n\n                this.adPositionTracking = {\n                    previousVideoAdBreak: currentVideoAdBreak,\n                    previousVideoAd: currentVideoAd,\n                };\n            } else {\n                this.isAdPlaying = false;\n            }\n        });\n\n        this.aampMediaPlayer.addEventListener('bitrateChanged', (payload) => {\n            this.callbackOnEvents('BitrateChanged', {\n                bitRate: payload.bitRate,\n                changeReason: payload.description,\n                height: payload.height,\n                width: payload.width,\n            });\n\n            this.videoElement.videoFramerate = payload.framerate;\n            this.videoElement.videoBitrate = payload.bitRate;\n            this.videoElement.videoHeight = payload.height;\n            this.videoElement.videoWidth = payload.width;\n            this.videoElement.dispatchEvent(new CustomEvent('bitrateChanged', {detail: payload}));\n        });\n\n        this.aampMediaPlayer.addEventListener('id3Metadata', (payload) => {\n            this.videoElement.dispatchEvent(new CustomEvent('id3Metadata', {detail: payload}));\n            // try {\n            //     console.warn('id3Metadata event',\n            //         // eslint-disable-next-line no-control-regex\n            //         String.fromCharCode(...payload.data).replaceAll(/[\\x00-\\x1f]/g, ''),\n            //         payload);\n            // } catch (error) {\n            //     console.warn('could not parse id3 data', error);\n            // }\n        });\n\n        this.aampMediaPlayer.setSubscribedTags(['#EXT-X-CUE', '#EXT-X-CUE-OUT', '#EXT-X-CUE-IN']);\n\n        this.aampMediaPlayer.addEventListener('timedMetadata', (payload) => {\n            this.videoElement.dispatchEvent(new CustomEvent('timedMetadata', {detail: payload}));\n\n            // SCTE35 markers arrive here\n            // initConfig.enableSCTE35PresentationTime: true,\n            // console.warn('timedMetadata 01', payload.timedMetadata);\n            // console.warn('timedMetadata 02', parseJson(payload.timedMetadata.content));\n        });\n\n        this.aampMediaPlayer.addEventListener('playbackSpeedChanged', (payload) => {\n            this.videoElement.playbackRate = payload.speed;\n\n            if (payload.speed === 0 && this.isScheduledPauseSet) {\n                this.isScheduledPauseSet = false;\n                console.warn('MIPA-52 02 lower limit of linear review buffer was reached and scheduled pause was triggered');\n                this.aampMediaPlayer.play();\n                return; // maybe don't send \"pause\" to AS as pause symbol may show\n            }\n\n            if (payload.speed >= 0 && this.isScheduledPauseSet) {\n                console.info('MIPA-52 scheduled pause reset');\n                this.aampMediaPlayer.pause(-1);\n                this.isScheduledPauseSet = false;\n            }\n\n            if (this.previousSpeedChange?.speed === 1 && payload.speed !== 1) {\n                console.log(`playbackSpeedChanged() paused at ${(this.aampMediaPlayer.getCurrentPosition() + this.videoElement.epochOffsetSeconds).toFixed(1)} seconds (expected Oztam toPosition)`);\n                this.fireVideoElementEvent('pause');\n            } else if (this.previousSpeedChange?.speed !== 1 && payload.speed === 1) {\n                console.log(`playbackSpeedChanged() playing at ${(this.aampMediaPlayer.getCurrentPosition() + this.videoElement.epochOffsetSeconds).toFixed(1)} seconds  (expected Oztam fromPosition)`);\n                if (Math.abs(this.previousSpeedChange.positionSeconds - this.aampMediaPlayer.getCurrentPosition()) > 1) {\n                    console.log('playbackSpeedChanged() seek has occured');\n                    this.fireVideoElementEvent('seeked');\n                }\n\n                this.fireVideoElementEvent('playing');\n            }\n\n            this.previousSpeedChange = {\n                ...payload,\n                positionSeconds: this.aampMediaPlayer.getCurrentPosition(),\n            };\n\n            this.callbackOnEvents('PlaybackSpeedChanged', {\n                playbackSpeed: payload.speed,\n                reason: payload.reason, // optional\n            });\n        });\n\n        this.aampMediaPlayer.addEventListener('speedsChanged', (payload) => {\n            this.callbackOnEvents('PlaybackSpeedsChanged', {\n                ...payload,\n            });\n        });\n\n        this.aampMediaPlayer.addEventListener('watermarkSessionUpdate', (payload) => {\n            this.callbackOnEvents('WatermarkSessionUpdate', {\n                ...payload,\n            });\n        });\n\n        this.aampMediaPlayer.addEventListener('playbackCompleted', (payload) => {\n            this.callbackOnEvents('MediaEnded', {\n                ...payload,\n            });\n        });\n\n        this.aampMediaPlayer.addEventListener('playbackStateChanged', (payload) => {\n            const playState = PLAYBACK_STATES[payload.state];\n\n            console.log('AAMP event received', 'playbackStateChanged', new Date().toISOString(), playState, payload);\n\n            if (playState) {\n                if (this.isScheduledPauseSet && playState === 'paused') {\n                    // when schedule pause is triggered\n                    // then inhibit PlayStateChanged event, we don't want to show the paused animation\n                    return;\n                }\n\n                this.callbackOnEvents('PlayStateChanged', {\n                    playState,\n                });\n\n                if (playState === 'playing') {\n                    const isFirstPlaying = !this.hasFirstFramePlayed;\n\n                    if (isFirstPlaying) {\n                        // first frame is playing, video start / recovery is successful\n                        this.sourceRetryCount = 0;\n                        this.sourceFirstFramePlayedAtTimestamp = new Date();\n                        console.log(`MIPA-192 00 sourceFirstFramePlayedAtTimestamp set to ${this.sourceFirstFramePlayedAtTimestamp.toISOString()}`);\n\n                        this.previousSpeedChange = {\n                            speed: 1,\n                            positionSeconds: this.aampMediaPlayer.getCurrentPosition(),\n                        };\n                        this.fireVideoElementEvent('playing', {\n                            detail: {isFirstPlaying},\n                        });\n                    }\n\n                    this.hasFirstFramePlayed = true;\n                    this.videoElement.currentTime = this.aampMediaPlayer.getCurrentPosition();\n                }\n            }\n\n            if (playState === 'initializing') {\n                this.fireVideoElementEvent('play', {detail: {\n                    stream: this.sourceObjects[this.sourceIndex],\n                    recovery: {\n                        settings: this.recoverySettings,\n                        state: {\n                            sourceIndex: this.sourceIndex,\n                            sourceIndexMax: this.sourceObjects.length - 1,\n                            sourceRetryCount: this.sourceRetryCount,\n                        },\n                    },\n                }});\n            } else if (playState === 'initialized') {\n                this.manifestUpdated();\n                this.fireVideoElementEvent('loadedmetadata');\n\n                console.log('initialized', 'manifest parsed', {\n                    getAvailableVideoTracks: parseJson(this.aampMediaPlayer.getAvailableVideoTracks()),\n                    getAvailableAudioTracks: parseJson(this.aampMediaPlayer.getAvailableAudioTracks(true)),\n                    getAvailableTextTracks: parseJson(this.aampMediaPlayer.getAvailableTextTracks(true)),\n                    getAvailableThumbnailTracks: parseJson(this.aampMediaPlayer.getAvailableThumbnailTracks()),\n                },\n                'tracks selected', {\n                    getAudioTrackInfo: parseJson(this.aampMediaPlayer.getAudioTrackInfo()),\n                    getTextTrackInfo: parseJson(this.aampMediaPlayer.getTextTrackInfo()),\n                });\n\n                this.videoElement.dispatchEvent(new CustomEvent('tracksChanged', {detail: {\n                    tracks: {\n                        audio: parseJson(this.aampMediaPlayer.getAudioTrackInfo()),\n                        // text: this.getCurrentTextTrack(), // text must wait for setText messages\n                    },\n                }}));\n            } else if (playState === 'preparing' || playState === 'buffering') {\n                this.videoElement.dispatchEvent(new CustomEvent('waiting'));\n            } else if (playState === 'prepared') {\n                this.videoElement.duration = this.aampMediaPlayer.getDurationSec();\n            } else if (playState === 'buffering') { // playbackStateChanged doesn't appear to fire, but bufferingChanged does\n                this.fireVideoElementEvent('waiting');\n            } else if (playState === 'seeking') {\n                this.fireVideoElementEvent('seeking');\n            } else if (playState === 'idle') {\n                // if current state is idle and previous state was 'complete`, then ignore, do not send ended\n                if (this.previousPlayState !== 'complete') {\n                    this.videoElement.dispatchEvent(new CustomEvent('ended', payload));\n                }\n            } else if (playState === 'complete') {\n                this.videoElement.dispatchEvent(new CustomEvent('ended', payload));\n            }\n\n            this.previousPlayState = playState;\n        });\n\n        this.aampMediaPlayer.addEventListener('seeked', (payload) => {\n            this.fireVideoElementEvent('seeked', {detail: payload});\n        });\n\n        this.aampMediaPlayer.addEventListener('mediaMetadata', (payload) => {\n            this.videoElement.hasBeenLive = payload.isLive;\n            this.videoElement.epochOffsetSeconds = payload.programStartTime;\n\n            this.callbackOnEvents('MediaOpened', {\n                mediaType: payload.isLive ? 'live' : 'vod',\n                availableAudioLanguages: payload.languages,\n                playbackSpeeds: payload.playbackSpeeds, // [-64, -32, -16, -4, -1, 0, 1, 4, 16, 32, 64],\n                // openingLatency: -1, // not required\n                width: payload.width,\n                height: payload.height,\n                hasDrm: payload.hasDrm,\n                // hasCC: false, // not required\n            });\n        });\n\n        this.aampMediaPlayer.addEventListener('playbackFailed', (payload) => {\n            if (payload.responseData === 'undefined') {\n                delete payload.responseData;\n            }\n\n            if (payload.responseData) {\n                try {\n                    // attempt to parse responseData, the response payload from /license\n                    const parser = new DOMParser();\n                    const xmlDoc = parser.parseFromString(payload.responseData, 'text/xml');\n\n                    ['faultstring', 'faultactor', 'StatusCode', 'CustomData'].forEach((tagName) => {\n                        payload[`responseData.${tagName}`] = xmlDoc.getElementsByTagName(tagName)[0]?.childNodes[0]?.nodeValue;\n                    });\n                } catch (e) {\n                    console.warn(`couldn't parse responseData ${payload.responseData}`, e);\n                }\n            }\n\n            this.reportError(payload);\n            console.error('AAMP event received',\n                'playbackFailed',\n                (this.hasFirstFramePlayed) ? 'mid-stream video playback failure' : 'video start failure',\n                payload);\n\n            // attempt auto-recovery by trying current stream or the next stream\n            try {\n                /* save current content position\n                - [x] Binge VOD\n                - [x] Binge trailer, non-DRM\n                - [x] Binge VOD with inserted ads (SSAI=true)\n                - [x] Binge VOD with inserted ads (SSAI=true) and error occurs during adBreak, do we restart the adBreak? Yes.\n                - [x] LINEAR (SSAI=false) on live edge\n                - [x] LINEAR (SSAI=false) a few minutes behind live\n                - [x] LINEAR with replaced ads (SSAI=true) and error occurs during adBreak on live edge\n                - [ ] LINEAR with replaced ads (SSAI=true) and error occurs during adBreak a few minutes behind live\n                - [x] LIVOD still live\n                - [x] LIVOD finished\n                - [x] IVOD still live\n                - [x] IVOD finished\n                */\n                const resumePositionOverride = this.getContentPosition(this.videoElement.currentOffsetTime * 1000);\n\n                this.selectNextSource();\n                console.log(`MIPA-192 01 sourceIndex=${this.sourceIndex} sourceRetryCount=${this.sourceRetryCount} sourceFirstFramePlayedAtTimestamp=${this.sourceFirstFramePlayedAtTimestamp?.toISOString()} resumePositionOverride=${resumePositionOverride}`);\n                this.attemptNextSource(\n                    payload,\n                    resumePositionOverride\n                );\n            } catch (error) {\n                this.handlePlaybackFailed(error, payload);\n            }\n        });\n\n        this.aampMediaPlayer.addEventListener('enteringLive', (payload) => {\n            this.callbackOnEvents('AampEnteringLive', {\n                ...payload,\n            });\n        });\n\n        this.aampMediaPlayer.addEventListener('contentGap', (payload) => {\n            this.callbackOnEvents('ContentGap', {\n                startTimeMsec: payload.time,\n                durationMsec: payload.duration,\n            });\n        });\n\n        this.aampMediaPlayer.addEventListener('bufferingChanged', (payload) => {\n            const msgName = payload.buffering ? 'BufferComplete' : 'BufferStart';\n\n            this.callbackOnEvents(msgName, {\n                ...payload,\n            });\n\n            if (payload.buffering) {\n                // resuming after a buffer underrun\n                this.fireVideoElementEvent('playing');\n            } else {\n                // paused due to buffer underrun\n                this.fireVideoElementEvent('waiting');\n            }\n        });\n\n        // end AS Event messages\n\n        this.aampInitConfigCommon = { // initConfig which is common to all providers, otherwise see aampInitConfigOverrides\n            ...{\n                earlyProcessing: true, // MIPA-155\n                enableCMCD: true,\n                enableLiveLatencyCorrection: false,\n                minLatencyCorrectionPlaybackRate: 1 - 0.03,\n                maxLatencyCorrectionPlaybackRate: 1 + 0.03,\n                enableSeekableRange: false,\n                limitResolution: true,\n                nativeCCRendering: false, // doesn't appear to do anything\n                persistBitrateOverSeek: true,\n                persistHighNetworkBandwidth: true,\n                progressReportingInterval: 0.5,\n                propagateUriParameters: false,\n                reportVideoPTS: true,\n                useAbsoluteTimeline: true,\n                userAgent: navigator.userAgent,\n                seekMidFragment: true,\n                // fragmentRetryLimit: 2, // appears to have no impact\n                // initFragmentRetryCount: 2, // appears to have no impact, might have an impact on video start only???\n\n                // DRM fields\n                configRuntimeDRM: false,\n                dashMaxDrmSessions: 10,\n                playreadyOutputProtection: true,\n                sendLicenseResponseHeaders: true,\n                setLicenseCaching: true,\n                sendUserAgentInLicense: true,\n            },\n            ...initConfigOverrides,\n        };\n\n        const PROXY_IP = (window.localStorage.getItem('PROXY_AAMP_DISABLED'))\n            ? ''\n            : window.localStorage.getItem('PROXY_IP') || '';\n\n        if (PROXY_IP) {\n            Object.assign(this.aampInitConfigCommon, {\n                sslVerifyPeer: false,\n                networkProxy: PROXY_IP,\n                licenseProxy: PROXY_IP,\n            });\n        }\n\n        // this.aampMediaPlayer.setTextStyleOptions(JSON.stringify({\n        //     // default white black red green blue yellow magenta cyan\n        //     textEdgeColor:         'red',\n        //     textForegroundColor:   'green',\n        //     textBackgroundColor:   'blue',\n        //     windowBorderEdgeColor: 'magenta',\n        //     windowFillColor:       'cyan',\n\n        //     // auto none raised depressed uniform drop_shadow_left drop_shadow_right\n        //     textEdgeStyle:         'raised',\n        //     windowBorderEdgeStyle: 'uniform',\n\n        //     // auto solid flash translucent transparent\n        //     textForegroundOpacity: 'solid',\n        //     textBackgroundOpacity: 'flash',\n        //     windowFillOpacity:     'translucent',\n\n        //     // auto small standard medium large extra_large\n        //     penSize:               'small',\n\n        //     // auto default monospaced_serif proportional_serif monospaced_sanserif proportional_sanserif casual cursive smallcaps\n        //     fontStyle:             'cursive',\n\n        //     // auto false true\n        //     penItalicized:         'true',\n        //     penUnderline:          'true',\n        // }));\n\n        const eventNames = {\n            adResolved: {level: 'log'},\n            anomalyReport: {level: '', text: false},\n            audioTracksChanged: {level: 'log'},\n            bitrateChanged: {level: 'log', text: false},\n            blocked: {level: 'log'},\n            bufferingChanged: {level: 'log'},\n            bulkTimedMetadata: {level: 'log'},\n            contentGap: {level: 'log'},\n            contentProtectionDataUpdate: {level: 'log'},\n            decoderAvailable: {level: 'log'},\n            drmMessage: {level: 'log'},\n            drmMetadata: {level: 'log'},\n            enteringLive: {level: 'log'},\n            httpResponseHeader: {level: 'log'},\n            id3Metadata: {level: 'log'},\n            // manifestRefresh: {level: ''},\n            mediaMetadata: {level: 'log'},\n            metricsData: {level: 'log'},\n            needManifest: {level: 'log'},\n            placementStart: {level: 'log'},\n            placementEnd: {level: 'log'},\n            placementError: {level: 'log'},\n            placementProgress: {level: 'log'},\n            playbackCompleted: {level: 'log'},\n            playbackFailed: {level: ''},\n            playbackProgressUpdate: {level: 'log', text: true},\n            playbackSpeedChanged: {level: 'log'},\n            playbackStarted: {level: 'log'},\n            playbackStateChanged: {level: '', text: true},\n            playlistIndexed: {level: 'log'},\n            reservationEnd: {level: 'log'},\n            reservationStart: {level: 'log'},\n            seeked: {level: 'log'},\n            speedsChanged: {level: 'log'},\n            textTracksChanged: {level: 'log'},\n            timedMetadata: {level: 'log'},\n            tuneProfiling: {level: 'log'},\n            tuneMetricsData: {level: ''},\n            // vttCueDataListener: {}, // intentionally removed MIPA-110\n            watermarkSessionUpdate: {level: 'log'},\n        };\n\n        for (const eventName in eventNames) {\n            this.aampMediaPlayer.addEventListener(eventName, (payload) => {\n                if (eventNames[eventName].level) {\n                    console[eventNames[eventName].level]('AAMP event received', eventName, payload);\n                }\n            });\n        }\n\n        this.aampMediaPlayer.addEventListener('anomalyReport', (payload) => {\n            let level;\n\n            switch (payload.severity) {\n                case 0:\n                    level = 'error';\n                    break;\n\n                case 1:\n                    level = 'warn';\n                    break;\n\n                case 2:\n                    level = 'info';\n                    break;\n                default:\n                    level = 'log';\n                    break;\n            }\n            console[level]('AAMP event received', 'anomalyReport', payload);\n\n            this.videoElement.dispatchEvent(new CustomEvent('anomalyReport', {detail: {\n                anomalyReport: payload,\n            }}));\n        });\n        this.aampMediaPlayer.addEventListener('manifestRefresh', (payload) => {\n            console.log('AAMP event received', 'manifestRefresh', payload);\n            this.manifestUpdated();\n        });\n        this.aampMediaPlayer.addEventListener('tuneMetricsData', (payload) => {\n            const tuneMetricsData = parseJson(payload.tuneMetricsData);\n\n            console.log('AAMP event received', 'tuneMetricsData', tuneMetricsData);\n            this.videoElement.dispatchEvent(new CustomEvent('tuneMetricsData', {detail: {\n                tuneMetricsData,\n            }}));\n        });\n    }\n\n    selectNextSource() {\n        if (this.recoverySettings?.minimumUninterruptedPlayback && this.sourceFirstFramePlayedAtTimestamp) {\n            const timeSinceLastRecovery = new Date() - this.sourceFirstFramePlayedAtTimestamp;\n\n            if (timeSinceLastRecovery < this.recoverySettings.minimumUninterruptedPlayback) {\n                console.log(`MIPA-192 11 stream recovered ${(timeSinceLastRecovery / 1000).toFixed(1)}s ago and has been interrupted, attempt the next stream (minimumUninterruptedPlayback=${(this.recoverySettings.minimumUninterruptedPlayback / 1000).toFixed(1)}s)`);\n                this.sourceIndex++;\n                this.sourceRetryCount = 0;\n                this.sourceFirstFramePlayedAtTimestamp = null;\n                return true;\n            }\n        }\n\n        if (this.recoverySettings?.sourceRetryCountMax\n            && this.sourceRetryCount < this.recoverySettings?.sourceRetryCountMax) {\n            console.log('MIPA-192 12 attempt the same stream (retry)');\n            this.sourceRetryCount++;\n            // sourceFirstFramePlayedAtTimestamp remains stashed and might be overwritten if first frame (of the current source retry) plays\n        } else {\n            console.log('MIPA-192 13 sourceRetryCountMax exceeded, attempt the next stream');\n            this.sourceIndex++;\n            this.sourceRetryCount = 0;\n            this.sourceFirstFramePlayedAtTimestamp = null;\n        }\n\n        return true;\n    }\n\n    manifestUpdated() {\n        try {\n            const manifest = this.aampMediaPlayer.getManifest();\n\n            if (manifest) {\n                const xmlDoc = new DOMParser().parseFromString(manifest, 'text/xml');\n                const mpd = xmlDoc.querySelector('MPD');\n\n                this.videoElement.isLive = mpd.attributes.getNamedItem('type').value === 'dynamic';\n            }\n        } catch (error) {\n            console.warn('manifestUpdated', error);\n        }\n    }\n\n    get name() {\n        return 'AAMP';\n    }\n\n    get version() {\n        return this.aampMediaPlayer.version;\n    }\n\n    fireVideoElementEvent(eventName, payload) {\n        this.videoElement.currentTime = this.aampMediaPlayer.getCurrentPosition();\n        this.videoElement.dispatchEvent(new CustomEvent(eventName, payload));\n    }\n\n    forceFatalError(payload) {\n        // none of these errors result in auto-recovery\n        let handled = false;\n\n        if (payload.source === 'VimondPlayerEventsAdapter') {\n            console.error('forceFatalError() Vimond Player Events error has ended this video session', payload.error);\n            this.reportError({\n                code: payload.error.code,\n                description: `Vimond Player Events error ${payload.error.title} ${payload.error.detail}`,\n            });\n            const minor = (payload.error?.title === 'SESSION_KICKED')\n                ? 111\n                : 101;\n\n            this.fireMediaFailed(new IntegratedPlayerError({\n                desc: `Vimond Player Events error ${payload.error.title} ${payload.error.detail}`,\n                major: 20000,\n                minor,\n            },\n            {response: payload.response}));\n\n            this.stop();\n            handled = true;\n        }\n\n        if (handled === false) {\n            console.warn('forceFatalError() not handled', payload);\n        }\n    }\n\n    getContentPosition(videoPosition) {\n        let contentPosition = videoPosition, durationOfPastPods = 0;\n\n        if (this.videoAdBreaks) {\n            for (const videoAdBreak of this.videoAdBreaks) {\n                const [firstVideoAd] = videoAdBreak.ads;\n                const [lastVideoAd] = videoAdBreak.ads.slice(-1);\n\n                if (!firstVideoAd || !lastVideoAd) {\n                    console.warn('firstVideoAd or lastVideoAd are falsey', firstVideoAd, lastVideoAd);\n                    break;\n                }\n\n                if (videoPosition < firstVideoAd.startTime) {\n                    // pod hasn't started\n                    break;\n                }\n\n                // pod has started\n                if (videoPosition <= lastVideoAd.startTime + lastVideoAd.duration) {\n                    // pod is current\n                    contentPosition = firstVideoAd.startTime - durationOfPastPods;\n                    break;\n                } else {\n                    // pod is in the past\n                    const durationOfVideoAdBreak = lastVideoAd.startTime + lastVideoAd.duration - firstVideoAd.startTime;\n\n                    durationOfPastPods += durationOfVideoAdBreak;\n                    contentPosition = videoPosition - durationOfPastPods;\n                }\n            }\n        }\n\n        return contentPosition;\n    }\n\n    getTimeline(replyFunction = null) {\n        if (!this.reportAdsToASEnabled) {\n            return [];\n        }\n\n        if (this.videoAdBreaks) {\n            return this.videoAdBreaks;\n        }\n\n        if (replyFunction) {\n            // stash reply function, for when videoAdBreaks is set\n            this.videoAdBreaksReplyFunction = replyFunction;\n        }\n\n        // videoAdBreaks not yet populated\n        console.warn('getTimeline() received before this.videoAdBreaks has been set');\n        return null;\n    }\n\n    play() {\n        this.aampMediaPlayer.setPlaybackRate(1);\n\n        return true;\n    }\n\n    pause() {\n        if (this.isTrickplayEnabled) {\n            if (this.isLinearReviewBufferEnabled\n                && this.skewedStart > 0\n                && (1000 * this.aampMediaPlayer.getCurrentPosition()) - this.tuneStartOffsetMilliseconds <= this.skewedStart + 1000) {\n                console.warn('MIPA-52 cannot pause near lower limit of linear review buffer');\n                return false;\n            }\n\n            this.aampMediaPlayer.setPlaybackRate(0);\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * @callback reportErrorObject dictated by AS' playbackFailed payload\n     * @param {string} code error code\n     * @param {string} description error description\n     */\n    /**\n     * report error to provider and their analytics libraries\n     *\n     * @param {reportErrorObject} payload options\n     */\n    reportError(payload) {\n        const {code, description, ...rest} = payload;\n\n        // Youbora adapter requires this error object\n        this.videoElement.error = {\n            code,\n            message: description,\n            metadata: rest,\n        };\n        this.videoElement.dispatchEvent(new CustomEvent('error', {detail: payload}));\n    }\n\n    setAampPlaybackRate(speed) {\n        this.aampMediaPlayer.setPlaybackRate(speed);\n    }\n\n    setBlock(isBlocked) {\n        this.aampMediaPlayer.setVideoMute(isBlocked);\n        this.aampMediaPlayer.setVolume(isBlocked ? 0 : 100);\n\n        this.videoElement.dispatchEvent(new CustomEvent('blocked', {detail: {\n            blocked: isBlocked,\n        }}));\n\n        return true;\n    }\n\n    setCallbackOnEvents(callbackOnEvents) {\n        this.callbackOnEvents = callbackOnEvents;\n    }\n\n    fireMediaFailed(error) {\n        const mediaFailedPayload = (error.getMediaFailedPayload)\n            ? error.getMediaFailedPayload()\n            : error;\n        const detail = (error.getDetail)\n            ? error.getDetail()\n            : null;\n\n        this.callbackOnEvents('MediaFailed', mediaFailedPayload);\n\n        sendNewRelicLog('MediaFailed', {\n            ...this.newRelicLogFields,\n            detail,\n            mediaFailedPayload,\n        });\n    }\n\n    setPosition(positionMilliseconds) {\n        if (this.isAdPlaying) {\n            // ad is playing, cannot trickplay\n            return this.trickplayResponseEnum.BlockedByAd;\n        } else if (!this.isTrickplayEnabled) {\n            // cannot trickplay\n            return this.trickplayResponseEnum.TrickplayDisabled;\n        }\n\n        const positionSeconds = (this.tuneStartOffsetMilliseconds + positionMilliseconds) / 1000;\n\n        this.aampMediaPlayer.seek(positionSeconds);\n        return this.trickplayResponseEnum.Success;\n    }\n\n    /**\n     * @param {Array.streamObject} sources list of streams to attempt to play\n     * @param {object} contentOptions from setAsset\n     * @param {object} initConfig specific changes to initConfig required for this asset\n     * @param {object} recoverySettings configure retry logic\n     */\n    setSources(sources, contentOptions = {}, initConfig = {}, recoverySettings = {}) {\n        this.isTrickplayEnabled = !!initConfig?.enableSeekableRange;\n        const aampConfiguration = {\n            ...this.aampInitConfigCommon,\n            ...initConfig,\n        };\n\n        // this.aampMediaPlayer.resetConfiguration(); // this clears everything, including audio/text preferences\n        console.debug(`calling AAMP.initConfig() with ${JSON.stringify(aampConfiguration)}`);\n        this.aampMediaPlayer.initConfig(aampConfiguration);\n        console.debug(`AAMP.getConfiguration() returns ${this.aampMediaPlayer.getConfiguration()}`);\n        this.contentOptions = contentOptions;\n        this.sourceObjects = sources;\n\n        this.sessionIndex = -1;\n        this.sourceIndex = 0;\n        this.sourceRetryCount = 0;\n        this.recoverySettings = recoverySettings;\n        this.attemptNextSource(\n            {description: 'streams object is empty'}\n        );\n    }\n\n    setSpeed(speed) {\n        if (speed === 1) {\n            this.setAampPlaybackRate(speed);\n            return this.trickplayResponseEnum.Success;\n        }\n\n        if (this.isAdPlaying) {\n            // ad is playing, cannot trickplay\n            return this.trickplayResponseEnum.BlockedByAd;\n        } else if (!this.isTrickplayEnabled) {\n            // cannot trickplay\n            return this.trickplayResponseEnum.TrickplayDisabled;\n        }\n\n        if (speed < 0 && this.isLinearReviewBufferEnabled) {\n            if ((1000 * this.aampMediaPlayer.getCurrentPosition()) - this.tuneStartOffsetMilliseconds <= this.skewedStart + 1000) {\n                console.warn('MIPA-52 cannot rewind near lower limit of linear review buffer');\n                return this.trickplayResponseEnum.TrickplayDisabled;\n            }\n\n            this.setLinearReviewBufferScheduledPause();\n        }\n\n        this.setAampPlaybackRate(speed);\n\n        return this.trickplayResponseEnum.Success;\n    }\n\n    setLinearReviewBufferScheduledPause() {\n        // set a scheduled pause at the lower limit of the live window\n        const scheduledPausePositionSeconds = (this.skewedStart + this.tuneStartOffsetMilliseconds) / 1000;\n\n        console.info('MIPA-52 scheduled pause set at ', scheduledPausePositionSeconds, ' seconds');\n        this.isScheduledPauseSet = true;\n        this.aampMediaPlayer.pause(scheduledPausePositionSeconds);\n    }\n\n    /**\n     * @callback requestHeaderObject\n     * @param {string} key header name\n     * @param {string} value header value\n     * @param {boolean} isLicenseRequest is for license requests only\n     */\n\n    /**\n     * @param {string} source manifest/stream url\n     * @param {object} drmConfig DRM options fed to AAMP.setDRMConfig()\n     * @param {Array.requestHeaderObject} requestHeaders custom headers fed to AAMP.addCustomHTTPHeader()\n     * @param {integer} resumePositionMilliseconds seek(resumePositionMilliseconds) performed before load()\n     * @param {boolean} autoPlay if false, stream is buffered but does not play until play() is called\n     * @param {object} tuneParams fed to AAMP.load(), see AAMP documentation\n     */\n    // eslint-disable-next-line max-params\n    setSrc(source, drmConfig = {}, requestHeaders = [], resumePositionMilliseconds = null, autoPlay = true, tuneParams = {}) {\n        this.aampMediaPlayer.stop();\n        this.resetVideoSession();\n\n        this.aampMediaPlayer.setDRMConfig({\n            ...this.defaultDrmConfig,\n            ...drmConfig,\n        });\n\n        console.log('MIPA-188/FOXTEL-783 removeCustomHTTPHeader() then set new ones');\n        this.aampMediaPlayer.removeCustomHTTPHeader();\n        requestHeaders.forEach(({key, value, isLicenseRequest}) => {\n            this.aampMediaPlayer.addCustomHTTPHeader(key, value, isLicenseRequest);\n        });\n\n        if (typeof resumePositionMilliseconds === 'number') {\n            this.startPositionMilliseconds = resumePositionMilliseconds;\n            this.aampMediaPlayer.seek(this.startPositionMilliseconds / 1000);\n        }\n\n        this.currentSrc = source;\n        this.videoElement.currentSrc = source;\n        this.aampMediaPlayer.load(source, autoPlay, tuneParams);\n    }\n\n    async setSrcFromSourceIndex(resumePositionOverride) {\n        // a.k.a playNextStream()\n        this.sessionIndex++;\n\n        const source = this.sourceObjects[this.sourceIndex]; // streamObject\n        const sourceIndexMax = this.sourceObjects.length - 1;\n        const sourceRetryCountMax = this.recoverySettings?.sourceRetryCountMax || 0;\n\n        const isInitialAttempt = this.sourceIndex === 0 && this.sourceRetryCount === 0;\n        const isFinalAttempt = (this.sourceIndex === sourceIndexMax)\n        && (sourceRetryCountMax > 0\n            ? this.sourceRetryCount === sourceRetryCountMax\n            : true\n        );\n        const tuneParams = {\n            contentType: this.contentOptions.assetType,\n            isInitialAttempt,\n            isFinalAttempt,\n            sessionId: `${this.sessionIndex}|${new Date().toISOString()}`,\n        };\n\n        if (source) {\n            const resumePositionMilliseconds = resumePositionOverride || this.contentOptions.resumePosition;\n\n            if (typeof source.requestHeadersFunction === 'function') {\n                try {\n                    // given DRM keys are shared between streams from the same asset\n                    // then /license requests are only made during video start\n                    source.requestHeaders = await source.requestHeadersFunction() || [];\n                } catch (error) {\n                    console.error('could not fetch requestHeaders, attempt the stream anyway', error);\n                }\n            }\n\n            console.debug(`attempting stream ${this.sourceIndex}/${sourceIndexMax} (retry ${this.sourceRetryCount}/${sourceRetryCountMax}) sessionId=${tuneParams.sessionId} resumePosition=${resumePositionMilliseconds?.toFixed(0)}ms ${JSON.stringify(source)}`);\n            this.setSrc(\n                source.url,\n                source.drmConfig,\n                source.requestHeaders,\n                resumePositionMilliseconds,\n                source.autoPlay,\n                tuneParams\n            );\n        } else if (this.sourceIndex > sourceIndexMax) {\n            throw 'no more streams available';\n        } else {\n            throw `no source available at ${this.sourceIndex}`;\n        }\n    }\n\n    attemptNextSource(playbackFailedPayload, resumePositionOverride = null) {\n        this.setSrcFromSourceIndex(resumePositionOverride)\n            .catch((error) => {\n                this.handlePlaybackFailed(error, playbackFailedPayload);\n            });\n    }\n\n    handlePlaybackFailed(error, playbackFailedPayload) {\n        console.error(error);\n        this.fireMediaFailed({\n            error: {\n                desc: playbackFailedPayload?.description,\n                major: playbackFailedPayload?.code,\n            },\n        });\n        this.videoElement.dispatchEvent(new CustomEvent('ended', playbackFailedPayload));\n    }\n\n    setIsEnabled(isEnabled) {\n        this.isEnabled = isEnabled;\n        if (isEnabled) {\n            this.videoElement.perceivedVideoStartBeginEpoch = new Date().getTime();\n        }\n    }\n\n    get videoAdBreaks() {\n        return this.#videoAdBreaks;\n    }\n\n    set videoAdBreaks(videoAdBreaks) {\n        this.#videoAdBreaks = videoAdBreaks;\n        if (videoAdBreaks) {\n            if (this.videoAdBreaksReplyFunction) {\n                this.videoAdBreaksReplyFunction(videoAdBreaks);\n                this.videoAdBreaksReplyFunction = null;\n            }\n\n            // MIPA-122 startPos workaround\n            if (this.startPositionMilliseconds > 0) {\n                const videoPositionMilliseconds = getVideoPositionFromContentPosition(this.startPositionMilliseconds, videoAdBreaks);\n\n                if (videoPositionMilliseconds > this.startPositionMilliseconds) {\n                    console.info(`adBreak/s are skewing video resumePosition of ${this.startPositionMilliseconds}ms, causing a double seek. ${videoPositionMilliseconds - this.startPositionMilliseconds}ms of ads occur before resumePosition`);\n                    this.aampMediaPlayer.seek(videoPositionMilliseconds / 1000);\n                }\n            }\n        }\n    }\n\n    setVolume(volume) {\n        this.aampMediaPlayer.setVolume(volume);\n\n        return true;\n    }\n\n    stop() {\n        this.aampMediaPlayer.stop();\n\n        this.resetAssetSession();\n\n        return true;\n    }\n\n    /*\n    reset for a new video session, which includes:\n    - attempting the same manifest (i.e. retry)\n    - attempting a new manifest\n    Video session starts at AAMP.load()\n    Video session ends at AAMP stop\n    */\n    resetVideoSession() {\n        this.hasFirstFramePlayed = false;\n        this.videoElement.error = null;\n\n        this.videoElement.playbackRate = 0;\n        this.videoElement.currentTime = null;\n        this.videoElement.duration = null;\n\n        this.videoElement.videoFramerate = null;\n        this.videoElement.videoBitrate = null;\n        this.videoElement.videoHeight = null;\n        this.videoElement.videoWidth = null;\n\n        this.previousPlayState = null;\n        this.previousSpeedChange = null;\n    }\n\n    /*\n    reset for a new asset session\n    Asset session starts at 'setAsset' message from AS\n    Asset session ends at 'stop' message from AS\n    */\n    resetAssetSession() {\n        this.resetVideoSession();\n        this.videoElement.currentOffsetTime = null;\n\n        console.log('MIPA-188/FOXTEL-783 removeCustomHTTPHeader()');\n        this.aampMediaPlayer.removeCustomHTTPHeader();\n\n        this.isEnabled = false;\n\n        this.setBlock(false);\n\n        this.contentOptions = null;\n        this.sourceIndex = 0;\n        this.sourceRetryCount = 0;\n        this.sourceObjects = null;\n\n        this.videoAdBreaks = null;\n        this.videoAdBreaksReplyFunction = null;\n        this.adPositionTracking = {};\n\n        this.isLinearReviewBufferEnabled = null;\n        this.tuneStartOffsetMilliseconds = null;\n        this.skewedStart = null;\n    }\n\n    /* audio track selection functions */\n\n    getAvailableAudioTracks() {\n        const tracks = parseJson(this.aampMediaPlayer.getAvailableAudioTracks(true)) || [];\n\n        return tracks.map(audioTrackMapFunction);\n    }\n\n    getCurrentAudioTrack() {\n        const trackInfo = parseJson(this.aampMediaPlayer.getAudioTrackInfo()) || [];\n        const [returnVal] = trackInfo.map(audioTrackMapFunction);\n\n        return returnVal;\n    }\n\n    // [\"deu,eng\",\"anyrole\",\"AUDIO-DESCRIPTIONS\"]\n    setPreferredAudioLanguage([languages, rendition, accessibility]) {\n        console.log('setPreferredAudioLanguage() audio preferences before',\n            parseJson(this.aampMediaPlayer.getPreferredAudioProperties()),\n            parseJson(this.aampMediaPlayer.getAudioTrackInfo()));\n\n        const result = this.aampMediaPlayer.setPreferredAudioLanguage(\n            languages,\n            rendition,\n            (accessibility) ? 'description' : null\n        );\n        // const audioTrackPreferenceObject = {\n        //     accessibility: (accessibility) ? 'description' : null,\n        //     // label:'',\n        //     languages,\n        //     rendition,\n        // };\n        // const result = this.aampMediaPlayer.setPreferredAudioLanguage(JSON.stringify(audioTrackPreferenceObject));\n\n        console.log('setPreferredAudioLanguage() audio preferences after',\n            parseJson(this.aampMediaPlayer.getPreferredAudioProperties()),\n            parseJson(this.aampMediaPlayer.getAudioTrackInfo()));\n\n        console.debug(`setPreferredAudioLanguage() AAMP.getConfiguration() returns ${this.aampMediaPlayer.getConfiguration()}`);\n\n        return result;\n    }\n\n    /* text track selection functions */\n\n    getAvailableTextTracks() {\n        const tracks = parseJson(this.aampMediaPlayer.getAvailableTextTracks(true)) || [];\n\n        return tracks.map(textTrackMapFunction);\n    }\n\n    getCurrentTextTrack() {\n        let returnVal = null;\n\n        if (this.isCaptionsEnabled) {\n            const trackInfo = parseJson(this.aampMediaPlayer.getTextTrackInfo());\n\n            if (trackInfo) {\n                [returnVal] = trackInfo.map(textTrackMapFunction);\n            } else {\n                const allTracks = parseJson(this.aampMediaPlayer.getAvailableTextTracks(true));\n\n                if (allTracks && allTracks.length > 0) {\n                    [returnVal] = allTracks.map(textTrackMapFunction);\n                }\n            }\n        }\n\n        return returnVal;\n    }\n\n    setTextTrack([language, type]) {\n        const tracks = this.getAvailableTextTracks();\n\n        console.log('setPreferredTextLanguage() text preferences before',\n            tracks,\n            parseJson(this.aampMediaPlayer.getPreferredTextProperties()),\n            parseJson(this.aampMediaPlayer.getTextTrackInfo()));\n\n        const result = this.aampMediaPlayer.setPreferredTextLanguage(JSON.stringify({\n            languages: [language, 'eng'],\n            type,\n        }));\n\n        console.log('setPreferredTextLanguage() text preferences after',\n            result,\n            parseJson(this.aampMediaPlayer.getPreferredTextProperties()),\n            parseJson(this.aampMediaPlayer.getTextTrackInfo()));\n\n        console.debug(`setPreferredTextLanguage() AAMP.getConfiguration() returns ${this.aampMediaPlayer.getConfiguration()}`);\n\n        return result;\n    }\n\n    setTextTrackEnabled(isCaptionsEnabled) {\n        this.isCaptionsEnabled = isCaptionsEnabled;\n        this.aampMediaPlayer.setClosedCaptionStatus(isCaptionsEnabled);\n\n        this.videoElement.dispatchEvent(new CustomEvent('tracksChanged', {detail: {\n            tracks: {\n                text: this.getCurrentTextTrack(),\n            },\n        }}));\n\n        return true;\n    }\n}\n","import { _class_apply_descriptor_get } from \"./_class_apply_descriptor_get.js\";\nimport { _class_extract_field_descriptor } from \"./_class_extract_field_descriptor.js\";\n\nexport function _class_private_field_get(receiver, privateMap) {\n    var descriptor = _class_extract_field_descriptor(receiver, privateMap, \"get\");\n    return _class_apply_descriptor_get(receiver, descriptor);\n}\nexport { _class_private_field_get as _ };\n","export function _class_apply_descriptor_get(receiver, descriptor) {\n    if (descriptor.get) return descriptor.get.call(receiver);\n\n    return descriptor.value;\n}\nexport { _class_apply_descriptor_get as _ };\n","export function _class_extract_field_descriptor(receiver, privateMap, action) {\n    if (!privateMap.has(receiver)) throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n\n    return privateMap.get(receiver);\n}\nexport { _class_extract_field_descriptor as _ };\n","import { _check_private_redeclaration } from \"./_check_private_redeclaration.js\";\n\nexport function _class_private_field_init(obj, privateMap, value) {\n    _check_private_redeclaration(obj, privateMap);\n    privateMap.set(obj, value);\n}\nexport { _class_private_field_init as _ };\n","export function _check_private_redeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) {\n        throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n    }\n}\nexport { _check_private_redeclaration as _ };\n","import { _class_apply_descriptor_set } from \"./_class_apply_descriptor_set.js\";\nimport { _class_extract_field_descriptor } from \"./_class_extract_field_descriptor.js\";\n\nexport function _class_private_field_set(receiver, privateMap, value) {\n    var descriptor = _class_extract_field_descriptor(receiver, privateMap, \"set\");\n    _class_apply_descriptor_set(receiver, descriptor, value);\n    return value;\n}\nexport { _class_private_field_set as _ };\n","export function _class_apply_descriptor_set(receiver, descriptor, value) {\n    if (descriptor.set) descriptor.set.call(receiver, value);\n    else {\n        if (!descriptor.writable) {\n            // This should only throw in strict mode, but class bodies are\n            // always strict and private fields can only be used inside\n            // class bodies.\n            throw new TypeError(\"attempted to set read only private field\");\n        }\n        descriptor.value = value;\n    }\n}\nexport { _class_apply_descriptor_set as _ };\n","function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n        var symbols = Object.getOwnPropertySymbols(object);\n        if (enumerableOnly) {\n            symbols = symbols.filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n            });\n        }\n        keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n}\nexport function _object_spread_props(target, source) {\n    source = source != null ? source : {};\n\n    if (Object.getOwnPropertyDescriptors) Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    else {\n        ownKeys(Object(source)).forEach(function(key) {\n            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n    }\n\n    return target;\n}\nexport { _object_spread_props as _ };\n","import { _object_without_properties_loose } from \"./_object_without_properties_loose.js\";\n\nexport function _object_without_properties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _object_without_properties_loose(source, excluded);\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n        var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n        for (i = 0; i < sourceSymbolKeys.length; i++) {\n            key = sourceSymbolKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n            target[key] = source[key];\n        }\n    }\n\n    return target;\n}\nexport { _object_without_properties as _ };\n","export function _object_without_properties_loose(source, excluded) {\n    if (source == null) return {};\n\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n        key = sourceKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        target[key] = source[key];\n    }\n\n    return target;\n}\nexport { _object_without_properties_loose as _ };\n","import {addProxyIp} from './utils';\n\n/**\n * Use New Relic's Log API to capture a message\n * New Relic Log API https://docs.newrelic.com/docs/logs/log-api/introduction-log-api/\n * Example NRQL query `SELECT * FROM Log WHERE logtype = 'jspp' SINCE 24 hours ago`\n *\n * @param {String} message main log message\n * @param {Object} attributes other fields that may be useful\n */\nexport default async function sendNewRelicLog(message, attributes) {\n    const requestBody = {\n        hostname: 'jspp.resources.streamotion.com.au',\n        logtype: 'jspp',\n        message,\n        timestamp: new Date().toISOString(),\n        ...attributes,\n    };\n\n    fetch(\n        addProxyIp('https://log-api.newrelic.com/log/v1'),\n        {\n            method: 'POST',\n            headers: {\n                'Api-Key': 'f476a78d10f213e60031a460a952d58dFFFFNRAL',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(requestBody),\n        }\n    ).catch((error) => {\n        console.error('New Relic log failed to send', error);\n    });\n}\n","export default class IntegratedPlayerError extends Error {\n    constructor(integratedPlayerErrorPayload, detail) {\n        super(integratedPlayerErrorPayload.desc);\n\n        this.major = integratedPlayerErrorPayload.major;\n        this.minor = integratedPlayerErrorPayload.minor;\n        this.description = integratedPlayerErrorPayload.desc;\n        this.detail = detail;\n    }\n\n    getDetail() {\n        return this.detail;\n    }\n\n    getMediaFailedPayload() {\n        return {\n            error: {\n                major: this.major,\n                minor: this.minor,\n                desc: this.description,\n            },\n        };\n    }\n}\n","// inputs include AAMP.getAvailableAudioTracks and AAMP.getAudioTrackInfo\nconst englishLanguageStrings = [\n    'en',\n    'eng',\n    'und',\n];\n\nexport const audioTrackMapFunction = ({accessibility, codec, language, name, rendition}) => ({\n    codec,\n    description: name,\n    language: (englishLanguageStrings.includes(language)) ? 'eng' : language,\n    role: rendition,\n    accessibilityType: (accessibility) ? 'description' : null,\n});\n\n// inputs include AAMP.getAvailableTextTracks and AAMP.getTextTrackInfo\nexport const textTrackMapFunction = ({codec, language, name, rendition, type}) => ({\n    codec,\n    description: name,\n    language: (englishLanguageStrings.includes(language)) ? 'eng' : language,\n    role: rendition,\n    type,\n});\n","/* eslint-disable no-console */\nimport {sendApplicationServicesMessage} from '../utils/as-messaging';\nimport IntegratedPlayerError from '../utils/integrated-player-error';\nimport getProviderAsset from './get-asset';\n\nexport default async function ppApiHandler({\n    player,\n    request,\n    deviceInfo,\n    webSocket,\n\n    iframeManager$,\n}) {\n    const {msgData} = request;\n    const ppFunctionName = msgData.fnName;\n    const ppApiReturnReplyFunction = getPpApiReturnReplyFunction(webSocket, ppFunctionName, request);\n\n    let result = false;\n\n    switch (ppFunctionName) {\n        case 'getAvailableAudioTracks':\n            ppApiReturnReplyFunction(\n                player.getAvailableAudioTracks()\n            );\n            break;\n\n        case 'getAvailableTextTracks':\n            ppApiReturnReplyFunction(\n                player.getAvailableTextTracks()\n            );\n            break;\n\n        case 'getCurrentAudioTrack':\n            ppApiReturnReplyFunction(\n                player.getCurrentAudioTrack()\n            );\n            break;\n\n        case 'getCurrentTextTrack':\n            ppApiReturnReplyFunction(\n                player.getCurrentTextTrack()\n            );\n            break;\n\n        case 'getTimeline':\n            // eslint-disable-next-line no-case-declarations\n            const timeline = player.getTimeline(ppApiReturnReplyFunction);\n\n            if (timeline) {\n                ppApiReturnReplyFunction(\n                    timeline\n                );\n            }\n\n            break;\n\n        case 'pause':\n            if (player.pause()) {\n                ppApiReturnReplyFunction(true);\n            } else {\n                ppApiReturnReplyFunction(-301);\n            }\n\n            break;\n\n        case 'setAsset':\n            player.setIsEnabled(true);\n\n            document.querySelector('#mount').style.display = 'none';\n            ppApiReturnReplyFunction(true); // AS messaging quirk, if this line is performed after setSources AS doesn't send the pause message\n            if (window.mediaFailedTimeout) {\n                clearTimeout(window.mediaFailedTimeout);\n            }\n\n            try {\n                iframeManager$.contentWindow.provider?.monitoringTeardown();\n                if (!msgData.fnArgs[0].match(/^https?:\\/\\/magneto\\.com\\//gm)) {\n                    throw `invalid locator ${msgData.fnArgs[0]}`;\n                }\n\n                const [locator, contentOptions] = msgData.fnArgs;\n\n                player.newRelicLogFields = {\n                    deviceInfo,\n                    provider: new URL(locator).searchParams.get('provider') || 'magneto',\n                    setAsset: {\n                        locator,\n                        contentOptions,\n                    },\n                };\n\n                const providerAsset = await getProviderAsset({\n                    msgData,\n                    deviceInfo,\n                    iframeManager$,\n                });\n\n                if (!player.isEnabled) {\n                    console.log('stop received, ignore this request MIPA-182');\n                    return;\n                }\n\n                iframeManager$.contentWindow.provider.setVideoAdBreaksCallback = (videoAdBreaks, error = null) => {\n                    if (error) {\n                        player.fireMediaFailed(new IntegratedPlayerError({\n                            major: 20000,\n                            minor: 103,\n                            desc: 'adTrackingUrl failed to return',\n                        },\n                        {response: error}));\n                        player.reportError({\n                            code: '20000|103',\n                            description: `adTrackingUrl failed to return: ${error}`,\n                        });\n                        return;\n                    }\n\n                    // eslint-disable-next-line no-console\n                    console.info(`setVideoAdBreaksCallback() ${JSON.stringify(videoAdBreaks)}`);\n                    player.videoAdBreaks = videoAdBreaks;\n\n                    // stream can now start playback (or buffer then start)\n                    player.play();\n                };\n\n                iframeManager$.contentWindow.provider.monitoringSetup(player.videoElement);\n\n                player.setSources(\n                    providerAsset.streams,\n                    msgData.fnArgs[1],\n                    providerAsset?.aampInitConfigOverrides,\n                    providerAsset.recoverySettings\n                );\n            } catch (e) {\n                let error = e;\n\n                if (!e.getMediaFailedPayload) {\n                    console.error('uncaught error', e);\n                    error = new IntegratedPlayerError({major: 20000, minor: 100, desc: `uncaught error: ${e}`},\n                        {\n                            response: e,\n                            responseString: `${e}`,\n                        });\n                }\n\n                // report error to AS\n                if (msgData?.fnArgs[1]?.assetType === 'LINEAR' && error.getMediaFailedPayload()?.error?.major === 20000) {\n                    console.log('MIPA-165 delaying error', error);\n                    // eslint-disable-next-line require-atomic-updates\n                    window.mediaFailedTimeout = setTimeout(() => {\n                        console.log('MIPA-165 firing delayed error', error);\n                        player.fireMediaFailed(error);\n                    }, 2000);\n                } else {\n                    player.fireMediaFailed(error);\n                }\n            }\n            break;\n\n        case 'setBlock':\n            ppApiReturnReplyFunction(\n                player.setBlock(msgData.fnArgs[0])\n            );\n            break;\n\n        case 'setDimensionsOfVideo':\n            ppApiReturnReplyFunction(true);\n            break;\n\n        case 'setPosition':\n            result = player.setPosition(msgData.fnArgs[0]);\n            if (result === player.trickplayResponseEnum.Success) {\n                ppApiReturnReplyFunction(true);\n            } else if (result === player.trickplayResponseEnum.BlockedByAd) {\n                player.callbackOnEvents('MediaWarning', {\n                    error: {\n                        major: 70,\n                        minor: null,\n                        description: 'seek not allowed by current segment',\n                        isWarning: true,\n                    },\n                });\n            } else if (result === player.trickplayResponseEnum.TrickplayDisabled) {\n                ppApiReturnReplyFunction(-302);\n            } else {\n                console.warn('unexpected response to setSpeed');\n            }\n\n            break;\n\n        case 'setPreferredAudioLanguage':\n            ppApiReturnReplyFunction(\n                player.setPreferredAudioLanguage(msgData.fnArgs)\n            );\n            break;\n\n        case 'setSpeed':\n            result = player.setSpeed(msgData.fnArgs[0]);\n            if (result === player.trickplayResponseEnum.Success) {\n                ppApiReturnReplyFunction(true);\n            } else if (result === player.trickplayResponseEnum.BlockedByAd) {\n                player.callbackOnEvents('MediaWarning', {\n                    error: {\n                        major: 70,\n                        minor: null,\n                        description: 'speed change not allowed by current segment',\n                        isWarning: true,\n                    },\n                });\n            } else if (result === player.trickplayResponseEnum.TrickplayDisabled) {\n                ppApiReturnReplyFunction(-301);\n            } else {\n                console.warn('unexpected response to setSpeed');\n            }\n\n            break;\n\n        case 'setTextTrack':\n            ppApiReturnReplyFunction(\n                player.setTextTrack(msgData.fnArgs)\n            );\n            break;\n\n        case 'setTextTrackEnabled':\n            ppApiReturnReplyFunction(\n                player.setTextTrackEnabled(msgData.fnArgs[0])\n            );\n            break;\n\n        case 'setVolume':\n            ppApiReturnReplyFunction(\n                player.setVolume(msgData.fnArgs[0] * 100)\n            );\n            break;\n\n        case 'stop':\n            ppApiReturnReplyFunction(\n                player.stop()\n            );\n            iframeManager$.contentWindow.provider?.monitoringTeardown();\n            break;\n\n        case 'updateSessionActivity':\n            // updateSessionActivity message can be ignored MIPA-271\n            break;\n\n        default:\n            console.warn(`ppApiHandler ppFunctionName ${ppFunctionName} not supported, msgData=${JSON.stringify(msgData)}`);\n    }\n}\n\nexport function getPpApiReturnReplyFunction(webSocket, fnName, request) {\n    return function ppApiReturnReplyFunction(returnVal) {\n        if (typeof returnVal == 'boolean') {\n            // eslint-disable-next-line no-param-reassign\n            returnVal = (returnVal === true) ? 0 : -1;\n        }\n\n        const payload = {\n            returnVal,\n        };\n\n        sendApplicationServicesMessage(\n            'ppApiReturn',\n            payload,\n            webSocket,\n            request\n        );\n    };\n}\n","import {\n    IFRAME_MANAGER_URL_PATH,\n    IFRAME_MANAGER_TIMEOUT_LOADING_PROVIDER_IN_SECONDS,\n} from '../utils/constants';\n\nimport {\n    changeIframeSource,\n    waitForKeyValueOnObject,\n} from '../utils/iframe';\n\nimport {\n    getTokenForProvider,\n} from './system-token-storage';\n\nexport default async function getProviderAsset({\n    msgData,\n    deviceInfo,\n\n    iframeManager$,\n}) {\n    const {partnerId, estbMacAddress} = deviceInfo.glassConfigure;\n    const [locatorString, glassContentOptions] = msgData.fnArgs;\n    const {authToken: glassAuthToken} = glassContentOptions;\n\n    delete glassContentOptions.authToken; // every provider gets contentOptions, only permitted providers get authToken/XSCT\n\n    const locator = new URL(locatorString);\n    const provider = locator.searchParams.get('provider');\n\n    return changeIframeSource(iframeManager$, `${IFRAME_MANAGER_URL_PATH}?partnerId=${partnerId}&estbMacAddress=${estbMacAddress}&provider=${provider || ''}`)\n        .then(() => waitForKeyValueOnObject(iframeManager$.contentWindow, 'provider', IFRAME_MANAGER_TIMEOUT_LOADING_PROVIDER_IN_SECONDS))\n        .then(() => getTokenForProvider(provider, glassAuthToken))\n        .then((authToken) => iframeManager$.contentWindow.provider.getAsset({\n            authToken,\n            glassAssetLocator: locator,\n            glassContentOptions,\n\n            deviceInfo,\n        }))\n        .catch((error) => {\n            error.provider = provider;\n            throw error;\n        });\n}\n\n/**\n * provider.getAsset() request\n *\n * @typedef {object} GetAssetRequest\n * @property {string} authToken auth token for provider\n * @property {string} glassAssetLocator locator uri for the requested asset\n * @property {object} glassContentOptions additional fields for the requested asset\n * @property {deviceInfo} deviceInfo device information\n *\n * @typedef {object} deviceInfo\n * @property {string} appName name of the Integrated Player\n * @property {string} appVersion version of the Integrated Player\n * @property {WebSocketMessageConfigure} glassConfigure configure object from Sky AS\n * @property {string} playerName name of AAMP\n * @property {string} playerVersion version of AAMP (will be tied to OS version, available in glassConfigure)\n * @property {string} uuid device UUID for use with Oztam, etc (currently created by Integrated Player)\n *\n * @typedef {import('../utils/as-messaging').WebSocketMessageConfigure} WebSocketMessageConfigure\n */\n\n/**\n * provider.getAsset() response\n *\n * @typedef {Object} GetAssetResponse\n * @property {object} aampInitConfigOverrides see AAMP config https://code.rdkcentral.com/r/plugins/gitiles/rdk/components/generic/aamp/+/refs/heads/stable2/AAMP-UVE-API.md#configuration\n * @property {streamObject[]} streams list of streams to attempt to play\n *\n * @typedef {Object} streamObject\n * @property {string} url manifest/stream url\n * @property {object} drmConfig see AAMP.setDrmConfig() https://code.rdkcentral.com/r/plugins/gitiles/rdk/components/generic/aamp/+/refs/heads/stable2/AAMP-UVE-API.md#setdrmconfig_config\n * @property {requestHeaderObject[]} requestHeaders see AAMP.addCustomHTTPHeader() https://code.rdkcentral.com/r/plugins/gitiles/rdk/components/generic/aamp/+/refs/heads/stable2/AAMP-UVE-API.md#addcustomhttpheader_headername_headervalue_islicenserequest\n * @property {function} requestHeadersFunction called when attempting or re-attempting a source. Supersedes `requestHeaders` field.\n *\n * @typedef requestHeaderObject\n * @property {string} key header name\n * @property {string} value header value\n * @property {boolean} isLicenseRequest is for license requests only\n */\n","/* eslint-disable no-bitwise */\nimport {v4 as generateUUID} from 'uuid';\nimport IntegratedPlayerError from '../utils/integrated-player-error';\n\nexport class Providers {\n    static ABC = 'au.com.abc';\n    static SBS = 'au.com.sbs';\n    static NINE = 'au.com.nine';\n    static SEVEN = 'au.com.seven';\n    static TEN = 'au.com.ten';\n\n    static UUID = 'au.com.device.uuid';\n}\n\nexport async function getTokenForProvider(provider, glassAuthToken = null) {\n    // first party provider gets glassAuthToken (XSCT)\n    if (provider === null) {\n        return glassAuthToken;\n    }\n\n    // third party provider fetches  from token storage\n    return fetch(`http://localhost:9005/as/system/token/${provider}`)\n        .then((response) => {\n            if (response.ok && response.status === 200) {\n                return response.json();\n            } else {\n                throw new IntegratedPlayerError({major: 20000, minor: 110, desc: 'no valid 3rd party authorization token'});\n            }\n        })\n        .then((body) => {\n            if (body.token) {\n                return body.token;\n            } else {\n                throw new IntegratedPlayerError({major: 20000, minor: 110, desc: 'no valid 3rd party authorization token'});\n            }\n        });\n}\n\nasync function setTokenForProvider(provider, token) {\n    return fetch(`http://localhost:9005/as/system/token/${provider}`,\n        {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                token,\n            }),\n        })\n        .then((response) => {\n            if (response.ok && response.status === 200) {\n                return token;\n            } else {\n                throw new IntegratedPlayerError({desc: '3rd party token could not be set'});\n            }\n        });\n}\n\nexport async function setupDeviceUuid() {\n    try {\n        return await getTokenForProvider(Providers.UUID);\n    } catch {\n        const token = await setTokenForProvider(Providers.UUID, generateUUID())\n            .catch((error) => {\n                console.error('could not set Device UUID', error);\n            });\n\n        // eslint-disable-next-line no-console\n        console.info('Device UUID created', token);\n\n        return token;\n    }\n}\n","export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';\nexport { default as NIL } from './nil.js';\nexport { default as version } from './version.js';\nexport { default as validate } from './validate.js';\nexport { default as stringify } from './stringify.js';\nexport { default as parse } from './parse.js';","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"/__parcel_source_root/"}